{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Mock from \"mockjs\";\nimport Cookie from \"js-cookie\";\nimport { getMenu } from \"../api\";\nexport default {\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\"\n      },\n      rules: {\n        username: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入用户名\"\n        }],\n        password: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"请输入密码\"\n        }]\n      }\n    };\n  },\n  methods: {\n    // 登录\n    submit() {\n      // // token信息\n      // const token = Mock.Random.guid();\n      // // token信息存入cookie用于不同页面间的通信\n      // Cookie.set('token',token);\n\n      // 检验通过\n      this.$refs.form.validate(valid => {\n        if (valid) {\n          getMenu(this.form).then(_ref => {\n            let {\n              data\n            } = _ref;\n            console.log(data);\n            if (data.code === 20000) {\n              // token信息存入cookie用于不同页面间的通信\n              Cookie.set(data.data.token, \"token\");\n              // 跳转至首页\n              this.$router.push(\"/home\");\n            } else {\n              this.$message.error(data.data.message);\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAgBA;AACA;AACA;AACA;EACAA;IACA;MACAC;QACAC;QACAC;MACA;MACAC;QACAF,WACA;UAAAG;UAAAC;UAAAC;QAAA,EACA;QACAJ;UAAAE;UAAAC;UAAAC;QAAA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;MACA;MACA;;MAEA;MACA;QACA;UACAC;YAAA;cAAAV;YAAA;YACAW;YACA;cACA;cACAC;cACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["data","form","username","password","rules","required","trigger","message","methods","submit","getMenu","console","Cookie"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\n  <el-form ref=\"form\" label-width=\"70px\" :inline=\"true\" class=\"login-container\" :model=\"form\" :rules=\"rules\">\n    <h3 class=\"login-title\">系统登录</h3>\n    <el-form-item label=\"用户名\" prop=\"username\">\n      <el-input v-model=\"form.username\" placeholder=\"请输入用户名\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"密码\" prop=\"password\">\n      <el-input type=\"password\" v-model=\"form.password\" placeholder=\"请输入密码\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submit\">登录</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport Mock from \"mockjs\";\nimport Cookie from \"js-cookie\";\nimport { getMenu } from \"../api\";\nexport default {\n  data() {\n    return {\n      form: {\n        username: \"\",\n        password: \"\",\n      },\n      rules: {\n        username: [\n          { required: true, trigger: \"blur\", message: \"请输入用户名\" },\n        ],\n        password: [{ required: true, trigger: \"blur\", message: \"请输入密码\" }],\n      },\n    };\n  },\n  methods: {\n    // 登录\n    submit() {\n      // // token信息\n      // const token = Mock.Random.guid();\n      // // token信息存入cookie用于不同页面间的通信\n      // Cookie.set('token',token);\n\n      // 检验通过\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          getMenu(this.form).then(({ data }) => {\n            console.log(data);\n            if (data.code === 20000) {\n              // token信息存入cookie用于不同页面间的通信\n              Cookie.set(data.data.token, \"token\");\n              // 跳转至首页\n              this.$router.push(\"/home\");\n            } else {\n              this.$message.error(data.data.message);\n            }\n          });\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.login-container {\n  width: 350px;\n  border: 1px solid #eaeaea;\n  margin: 180px auto;\n  padding: 35px 35px 15px 35px;\n  background-color: #fff;\n  border-radius: 15px;\n  box-shadow: 0 0 25px #cac6c6;\n  box-sizing: border-box;\n  .login-title {\n    text-align: center;\n    margin-bottom: 40px;\n    color: #505458;\n  }\n  .el-input {\n    width: 198px;\n  }\n  .el-button {\n    margin-left: 105px;\n    margin-top: 10px;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}