{"ast":null,"code":"import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\nfunction isLinearGradient(value) {\n  return value.type === 'linear';\n}\nfunction isRadialGradient(value) {\n  return value.type === 'radial';\n}\nfunction isGradient(value) {\n  return value && (value.type === 'linear' || value.type === 'radial');\n}\nvar GradientManager = function (_super) {\n  __extends(GradientManager, _super);\n  function GradientManager(zrId, svgRoot) {\n    return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n  }\n  GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n    if (displayable && displayable.style) {\n      var that_1 = this;\n      zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n        var value = displayable.style[fillOrStroke];\n        if (isGradient(value)) {\n          var gradient = value;\n          var defs = that_1.getDefs(true);\n          var dom = void 0;\n          if (gradient.__dom) {\n            dom = gradient.__dom;\n            if (!defs.contains(gradient.__dom)) {\n              that_1.addDom(dom);\n            }\n          } else {\n            dom = that_1.add(gradient);\n          }\n          that_1.markUsed(displayable);\n          var id = dom.getAttribute('id');\n          svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n        }\n      });\n    }\n  };\n  GradientManager.prototype.add = function (gradient) {\n    var dom;\n    if (isLinearGradient(gradient)) {\n      dom = this.createElement('linearGradient');\n    } else if (isRadialGradient(gradient)) {\n      dom = this.createElement('radialGradient');\n    } else {\n      zrUtil.logError('Illegal gradient type.');\n      return null;\n    }\n    gradient.id = gradient.id || this.nextId++;\n    dom.setAttribute('id', 'zr' + this._zrId + '-gradient-' + gradient.id);\n    this.updateDom(gradient, dom);\n    this.addDom(dom);\n    return dom;\n  };\n  GradientManager.prototype.update = function (gradient) {\n    if (!isGradient(gradient)) {\n      return;\n    }\n    var that = this;\n    this.doUpdate(gradient, function () {\n      var dom = gradient.__dom;\n      if (!dom) {\n        return;\n      }\n      var tagName = dom.tagName;\n      var type = gradient.type;\n      if (type === 'linear' && tagName === 'linearGradient' || type === 'radial' && tagName === 'radialGradient') {\n        that.updateDom(gradient, gradient.__dom);\n      } else {\n        that.removeDom(gradient);\n        that.add(gradient);\n      }\n    });\n  };\n  GradientManager.prototype.updateDom = function (gradient, dom) {\n    if (isLinearGradient(gradient)) {\n      dom.setAttribute('x1', gradient.x + '');\n      dom.setAttribute('y1', gradient.y + '');\n      dom.setAttribute('x2', gradient.x2 + '');\n      dom.setAttribute('y2', gradient.y2 + '');\n    } else if (isRadialGradient(gradient)) {\n      dom.setAttribute('cx', gradient.x + '');\n      dom.setAttribute('cy', gradient.y + '');\n      dom.setAttribute('r', gradient.r + '');\n    } else {\n      zrUtil.logError('Illegal gradient type.');\n      return;\n    }\n    if (gradient.global) {\n      dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n    } else {\n      dom.setAttribute('gradientUnits', 'objectBoundingBox');\n    }\n    dom.innerHTML = '';\n    var colors = gradient.colorStops;\n    for (var i = 0, len = colors.length; i < len; ++i) {\n      var stop_1 = this.createElement('stop');\n      stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n      var color = colors[i].color;\n      if (color.indexOf('rgba') > -1) {\n        var opacity = colorTool.parse(color)[3];\n        var hex = colorTool.toHex(color);\n        stop_1.setAttribute('stop-color', '#' + hex);\n        stop_1.setAttribute('stop-opacity', opacity + '');\n      } else {\n        stop_1.setAttribute('stop-color', colors[i].color);\n      }\n      dom.appendChild(stop_1);\n    }\n    gradient.__dom = dom;\n  };\n  GradientManager.prototype.markUsed = function (displayable) {\n    if (displayable.style) {\n      var gradient = displayable.style.fill;\n      if (gradient && gradient.__dom) {\n        _super.prototype.markDomUsed.call(this, gradient.__dom);\n      }\n      gradient = displayable.style.stroke;\n      if (gradient && gradient.__dom) {\n        _super.prototype.markDomUsed.call(this, gradient.__dom);\n      }\n    }\n  };\n  return GradientManager;\n}(Definable);\nexport default GradientManager;","map":{"version":3,"names":["__extends","Definable","zrUtil","colorTool","isLinearGradient","value","type","isRadialGradient","isGradient","GradientManager","_super","zrId","svgRoot","call","prototype","addWithoutUpdate","svgElement","displayable","style","that_1","each","fillOrStroke","gradient","defs","getDefs","dom","__dom","contains","addDom","add","markUsed","id","getAttribute","setAttribute","createElement","logError","nextId","_zrId","updateDom","update","that","doUpdate","tagName","removeDom","x","y","x2","y2","r","global","innerHTML","colors","colorStops","i","len","length","stop_1","offset","color","indexOf","opacity","parse","hex","toHex","appendChild","fill","markDomUsed","stroke"],"sources":["/Users/jiong/Downloads/my-app/node_modules/zrender/lib/svg/helper/GradientManager.js"],"sourcesContent":["import { __extends } from \"tslib\";\nimport Definable from './Definable';\nimport * as zrUtil from '../../core/util';\nimport * as colorTool from '../../tool/color';\nfunction isLinearGradient(value) {\n    return value.type === 'linear';\n}\nfunction isRadialGradient(value) {\n    return value.type === 'radial';\n}\nfunction isGradient(value) {\n    return value && (value.type === 'linear'\n        || value.type === 'radial');\n}\nvar GradientManager = (function (_super) {\n    __extends(GradientManager, _super);\n    function GradientManager(zrId, svgRoot) {\n        return _super.call(this, zrId, svgRoot, ['linearGradient', 'radialGradient'], '__gradient_in_use__') || this;\n    }\n    GradientManager.prototype.addWithoutUpdate = function (svgElement, displayable) {\n        if (displayable && displayable.style) {\n            var that_1 = this;\n            zrUtil.each(['fill', 'stroke'], function (fillOrStroke) {\n                var value = displayable.style[fillOrStroke];\n                if (isGradient(value)) {\n                    var gradient = value;\n                    var defs = that_1.getDefs(true);\n                    var dom = void 0;\n                    if (gradient.__dom) {\n                        dom = gradient.__dom;\n                        if (!defs.contains(gradient.__dom)) {\n                            that_1.addDom(dom);\n                        }\n                    }\n                    else {\n                        dom = that_1.add(gradient);\n                    }\n                    that_1.markUsed(displayable);\n                    var id = dom.getAttribute('id');\n                    svgElement.setAttribute(fillOrStroke, 'url(#' + id + ')');\n                }\n            });\n        }\n    };\n    GradientManager.prototype.add = function (gradient) {\n        var dom;\n        if (isLinearGradient(gradient)) {\n            dom = this.createElement('linearGradient');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom = this.createElement('radialGradient');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return null;\n        }\n        gradient.id = gradient.id || this.nextId++;\n        dom.setAttribute('id', 'zr' + this._zrId\n            + '-gradient-' + gradient.id);\n        this.updateDom(gradient, dom);\n        this.addDom(dom);\n        return dom;\n    };\n    GradientManager.prototype.update = function (gradient) {\n        if (!isGradient(gradient)) {\n            return;\n        }\n        var that = this;\n        this.doUpdate(gradient, function () {\n            var dom = gradient.__dom;\n            if (!dom) {\n                return;\n            }\n            var tagName = dom.tagName;\n            var type = gradient.type;\n            if (type === 'linear' && tagName === 'linearGradient'\n                || type === 'radial' && tagName === 'radialGradient') {\n                that.updateDom(gradient, gradient.__dom);\n            }\n            else {\n                that.removeDom(gradient);\n                that.add(gradient);\n            }\n        });\n    };\n    GradientManager.prototype.updateDom = function (gradient, dom) {\n        if (isLinearGradient(gradient)) {\n            dom.setAttribute('x1', gradient.x + '');\n            dom.setAttribute('y1', gradient.y + '');\n            dom.setAttribute('x2', gradient.x2 + '');\n            dom.setAttribute('y2', gradient.y2 + '');\n        }\n        else if (isRadialGradient(gradient)) {\n            dom.setAttribute('cx', gradient.x + '');\n            dom.setAttribute('cy', gradient.y + '');\n            dom.setAttribute('r', gradient.r + '');\n        }\n        else {\n            zrUtil.logError('Illegal gradient type.');\n            return;\n        }\n        if (gradient.global) {\n            dom.setAttribute('gradientUnits', 'userSpaceOnUse');\n        }\n        else {\n            dom.setAttribute('gradientUnits', 'objectBoundingBox');\n        }\n        dom.innerHTML = '';\n        var colors = gradient.colorStops;\n        for (var i = 0, len = colors.length; i < len; ++i) {\n            var stop_1 = this.createElement('stop');\n            stop_1.setAttribute('offset', colors[i].offset * 100 + '%');\n            var color = colors[i].color;\n            if (color.indexOf('rgba') > -1) {\n                var opacity = colorTool.parse(color)[3];\n                var hex = colorTool.toHex(color);\n                stop_1.setAttribute('stop-color', '#' + hex);\n                stop_1.setAttribute('stop-opacity', opacity + '');\n            }\n            else {\n                stop_1.setAttribute('stop-color', colors[i].color);\n            }\n            dom.appendChild(stop_1);\n        }\n        gradient.__dom = dom;\n    };\n    GradientManager.prototype.markUsed = function (displayable) {\n        if (displayable.style) {\n            var gradient = displayable.style.fill;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n            gradient = displayable.style.stroke;\n            if (gradient && gradient.__dom) {\n                _super.prototype.markDomUsed.call(this, gradient.__dom);\n            }\n        }\n    };\n    return GradientManager;\n}(Definable));\nexport default GradientManager;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}