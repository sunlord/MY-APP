{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElement } from '../core';\nimport * as zrUtil from '../../core/util';\nimport Path from '../../graphic/Path';\nimport ZRImage from '../../graphic/Image';\nimport TSpan from '../../graphic/TSpan';\nimport { path as svgPath, image as svgImage, text as svgText } from '../graphic';\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\nvar Definable = function () {\n  function Definable(zrId, svgRoot, tagNames, markLabel, domName) {\n    this.nextId = 0;\n    this._domName = '_dom';\n    this.createElement = createElement;\n    this._zrId = zrId;\n    this._svgRoot = svgRoot;\n    this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n    this._markLabel = markLabel;\n    if (domName) {\n      this._domName = domName;\n    }\n  }\n  Definable.prototype.getDefs = function (isForceCreating) {\n    var svgRoot = this._svgRoot;\n    var defs = this._svgRoot.getElementsByTagName('defs');\n    if (defs.length === 0) {\n      if (isForceCreating) {\n        var defs_1 = svgRoot.insertBefore(this.createElement('defs'), svgRoot.firstChild);\n        if (!defs_1.contains) {\n          defs_1.contains = function (el) {\n            var children = defs_1.children;\n            if (!children) {\n              return false;\n            }\n            for (var i = children.length - 1; i >= 0; --i) {\n              if (children[i] === el) {\n                return true;\n              }\n            }\n            return false;\n          };\n        }\n        return defs_1;\n      } else {\n        return null;\n      }\n    } else {\n      return defs[0];\n    }\n  };\n  Definable.prototype.doUpdate = function (target, onUpdate) {\n    if (!target) {\n      return;\n    }\n    var defs = this.getDefs(false);\n    if (target[this._domName] && defs.contains(target[this._domName])) {\n      if (typeof onUpdate === 'function') {\n        onUpdate(target);\n      }\n    } else {\n      var dom = this.add(target);\n      if (dom) {\n        target[this._domName] = dom;\n      }\n    }\n  };\n  Definable.prototype.add = function (target) {\n    return null;\n  };\n  Definable.prototype.addDom = function (dom) {\n    var defs = this.getDefs(true);\n    if (dom.parentNode !== defs) {\n      defs.appendChild(dom);\n    }\n  };\n  Definable.prototype.removeDom = function (target) {\n    var defs = this.getDefs(false);\n    if (defs && target[this._domName]) {\n      defs.removeChild(target[this._domName]);\n      target[this._domName] = null;\n    }\n  };\n  Definable.prototype.getDoms = function () {\n    var defs = this.getDefs(false);\n    if (!defs) {\n      return [];\n    }\n    var doms = [];\n    zrUtil.each(this._tagNames, function (tagName) {\n      var tags = defs.getElementsByTagName(tagName);\n      for (var i = 0; i < tags.length; i++) {\n        doms.push(tags[i]);\n      }\n    });\n    return doms;\n  };\n  Definable.prototype.markAllUnused = function () {\n    var doms = this.getDoms();\n    var that = this;\n    zrUtil.each(doms, function (dom) {\n      dom[that._markLabel] = MARK_UNUSED;\n    });\n  };\n  Definable.prototype.markDomUsed = function (dom) {\n    dom && (dom[this._markLabel] = MARK_USED);\n  };\n  ;\n  Definable.prototype.markDomUnused = function (dom) {\n    dom && (dom[this._markLabel] = MARK_UNUSED);\n  };\n  ;\n  Definable.prototype.isDomUnused = function (dom) {\n    return dom && dom[this._markLabel] !== MARK_USED;\n  };\n  Definable.prototype.removeUnused = function () {\n    var _this = this;\n    var defs = this.getDefs(false);\n    if (!defs) {\n      return;\n    }\n    var doms = this.getDoms();\n    zrUtil.each(doms, function (dom) {\n      if (_this.isDomUnused(dom)) {\n        defs.removeChild(dom);\n      }\n    });\n  };\n  Definable.prototype.getSvgProxy = function (displayable) {\n    if (displayable instanceof Path) {\n      return svgPath;\n    } else if (displayable instanceof ZRImage) {\n      return svgImage;\n    } else if (displayable instanceof TSpan) {\n      return svgText;\n    } else {\n      return svgPath;\n    }\n  };\n  Definable.prototype.getSvgElement = function (displayable) {\n    return displayable.__svgEl;\n  };\n  return Definable;\n}();\nexport default Definable;","map":{"version":3,"names":["createElement","zrUtil","Path","ZRImage","TSpan","path","svgPath","image","svgImage","text","svgText","MARK_UNUSED","MARK_USED","Definable","zrId","svgRoot","tagNames","markLabel","domName","nextId","_domName","_zrId","_svgRoot","_tagNames","_markLabel","prototype","getDefs","isForceCreating","defs","getElementsByTagName","length","defs_1","insertBefore","firstChild","contains","el","children","i","doUpdate","target","onUpdate","dom","add","addDom","parentNode","appendChild","removeDom","removeChild","getDoms","doms","each","tagName","tags","push","markAllUnused","that","markDomUsed","markDomUnused","isDomUnused","removeUnused","_this","getSvgProxy","displayable","getSvgElement","__svgEl"],"sources":["/Users/jiong/Downloads/my-app/node_modules/zrender/lib/svg/helper/Definable.js"],"sourcesContent":["import { createElement } from '../core';\nimport * as zrUtil from '../../core/util';\nimport Path from '../../graphic/Path';\nimport ZRImage from '../../graphic/Image';\nimport TSpan from '../../graphic/TSpan';\nimport { path as svgPath, image as svgImage, text as svgText } from '../graphic';\nvar MARK_UNUSED = '0';\nvar MARK_USED = '1';\nvar Definable = (function () {\n    function Definable(zrId, svgRoot, tagNames, markLabel, domName) {\n        this.nextId = 0;\n        this._domName = '_dom';\n        this.createElement = createElement;\n        this._zrId = zrId;\n        this._svgRoot = svgRoot;\n        this._tagNames = typeof tagNames === 'string' ? [tagNames] : tagNames;\n        this._markLabel = markLabel;\n        if (domName) {\n            this._domName = domName;\n        }\n    }\n    Definable.prototype.getDefs = function (isForceCreating) {\n        var svgRoot = this._svgRoot;\n        var defs = this._svgRoot.getElementsByTagName('defs');\n        if (defs.length === 0) {\n            if (isForceCreating) {\n                var defs_1 = svgRoot.insertBefore(this.createElement('defs'), svgRoot.firstChild);\n                if (!defs_1.contains) {\n                    defs_1.contains = function (el) {\n                        var children = defs_1.children;\n                        if (!children) {\n                            return false;\n                        }\n                        for (var i = children.length - 1; i >= 0; --i) {\n                            if (children[i] === el) {\n                                return true;\n                            }\n                        }\n                        return false;\n                    };\n                }\n                return defs_1;\n            }\n            else {\n                return null;\n            }\n        }\n        else {\n            return defs[0];\n        }\n    };\n    Definable.prototype.doUpdate = function (target, onUpdate) {\n        if (!target) {\n            return;\n        }\n        var defs = this.getDefs(false);\n        if (target[this._domName] && defs.contains(target[this._domName])) {\n            if (typeof onUpdate === 'function') {\n                onUpdate(target);\n            }\n        }\n        else {\n            var dom = this.add(target);\n            if (dom) {\n                target[this._domName] = dom;\n            }\n        }\n    };\n    Definable.prototype.add = function (target) {\n        return null;\n    };\n    Definable.prototype.addDom = function (dom) {\n        var defs = this.getDefs(true);\n        if (dom.parentNode !== defs) {\n            defs.appendChild(dom);\n        }\n    };\n    Definable.prototype.removeDom = function (target) {\n        var defs = this.getDefs(false);\n        if (defs && target[this._domName]) {\n            defs.removeChild(target[this._domName]);\n            target[this._domName] = null;\n        }\n    };\n    Definable.prototype.getDoms = function () {\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return [];\n        }\n        var doms = [];\n        zrUtil.each(this._tagNames, function (tagName) {\n            var tags = defs.getElementsByTagName(tagName);\n            for (var i = 0; i < tags.length; i++) {\n                doms.push(tags[i]);\n            }\n        });\n        return doms;\n    };\n    Definable.prototype.markAllUnused = function () {\n        var doms = this.getDoms();\n        var that = this;\n        zrUtil.each(doms, function (dom) {\n            dom[that._markLabel] = MARK_UNUSED;\n        });\n    };\n    Definable.prototype.markDomUsed = function (dom) {\n        dom && (dom[this._markLabel] = MARK_USED);\n    };\n    ;\n    Definable.prototype.markDomUnused = function (dom) {\n        dom && (dom[this._markLabel] = MARK_UNUSED);\n    };\n    ;\n    Definable.prototype.isDomUnused = function (dom) {\n        return dom && dom[this._markLabel] !== MARK_USED;\n    };\n    Definable.prototype.removeUnused = function () {\n        var _this = this;\n        var defs = this.getDefs(false);\n        if (!defs) {\n            return;\n        }\n        var doms = this.getDoms();\n        zrUtil.each(doms, function (dom) {\n            if (_this.isDomUnused(dom)) {\n                defs.removeChild(dom);\n            }\n        });\n    };\n    Definable.prototype.getSvgProxy = function (displayable) {\n        if (displayable instanceof Path) {\n            return svgPath;\n        }\n        else if (displayable instanceof ZRImage) {\n            return svgImage;\n        }\n        else if (displayable instanceof TSpan) {\n            return svgText;\n        }\n        else {\n            return svgPath;\n        }\n    };\n    Definable.prototype.getSvgElement = function (displayable) {\n        return displayable.__svgEl;\n    };\n    return Definable;\n}());\nexport default Definable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}